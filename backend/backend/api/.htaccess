<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # 既存のファイルはそのまま
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]
    
    # 既存のディレクトリはそのまま
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # シンプルなPHPファイルへのリダイレクト
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]+)$ $1.php [L]
    
    # サブディレクトリの処理
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]+)/([^/]+)$ $1/$2.php [L]
</IfModule>